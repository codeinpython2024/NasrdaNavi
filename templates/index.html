<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NasrdaNavi - Campus Navigation</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Mapbox GL CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet"/>

    <!-- App CSS -->
    <link rel="stylesheet" href="/static/css/variables.css"/>
    <link rel="stylesheet" href="/static/css/main.css"/>
    <link rel="stylesheet" href="/static/css/splash.css"/>
    <link rel="stylesheet" href="/static/css/components.css"/>
    <link rel="stylesheet" href="/static/css/voice.css"/>
    <link rel="stylesheet" href="/static/css/map.css"/>
    <link rel="stylesheet" href="/static/css/mobile.css"/>
</head>

<body>
<!-- Splash Screen -->
<div id="splash">
    <div class="splash-stars"></div>
    <div class="splash-orbit">
        <div class="splash-particle"></div>
    </div>
    <div class="mascot-glow"></div>
    <img id="splashMascot" src="/static/Vector.png" alt="Navi" class="splash-mascot"/>
    <div class="splash-brand">
        <h1 class="splash-title">NasrdaNavi</h1>
        <p class="splash-subtitle">Campus Navigation System</p>
    </div>
    <button id="splashStartBtn" class="splash-start-btn">
        <span class="splash-start-text">Start Exploring</span>
        <img src="/static/Vector.png" alt="" class="splash-start-mascot"/>
    </button>
    <div class="splash-footer">
        <img src="/static/nasrda-logo.png" alt="NASRDA" class="splash-nasrda-logo"/>
        <p class="splash-tagline">Powered by <span>NASRDA</span></p>
    </div>
</div>

<!-- Mapbox Token -->
<input type="hidden" id="mapbox-token" value="{{ config.MAPBOX_ACCESS_TOKEN }}"/>

<!-- Sidebar -->
<aside class="sidebar">
    <div class="sidebar-brand">
        <img src="/static/Vector.png" alt="Navi" class="sidebar-mascot"/>
        <div>
            <div class="sidebar-title">NasrdaNavi</div>
            <div class="sidebar-subtitle">Campus Navigation</div>
        </div>
    </div>

    <div class="sidebar-section">
        <label class="sidebar-label">Search</label>
        <div class="input-group">
            <input id="searchBox" type="text" class="form-control" placeholder="Buildings, roads...">
            <button id="searchBtn" class="btn btn-primary">Go</button>
        </div>
        <div id="searchResults"></div>
    </div>

    <div id="departmentList" class="sidebar-section" style="display:none;">
        <label class="sidebar-label">Departments</label>
        <ul class="list-group" id="departments"></ul>
    </div>

    <div class="sidebar-section">
        <label class="sidebar-label">Navigation Points</label>
        <div class="nav-point-buttons">
            <button id="btnSetStart" class="nav-point-btn" title="Click, then click on map to set start">
                <span class="nav-point-icon start">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="3" fill="currentColor"></circle>
                    </svg>
                </span>
                <span class="nav-point-text">Set Start</span>
            </button>
            <button id="btnSetEnd" class="nav-point-btn" title="Click, then click on map to set destination">
                <span class="nav-point-icon end">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"></path>
                        <circle cx="12" cy="9" r="2.5" fill="currentColor"></circle>
                    </svg>
                </span>
                <span class="nav-point-text">Set End</span>
            </button>
        </div>
    </div>

    <div class="sidebar-section sidebar-directions">
        <div class="sidebar-label-row">
            <label class="sidebar-label">Directions</label>
            <button id="toggleDirections" class="btn-icon">âˆ’</button>
        </div>
        <div id="directionsBody" class="directions-content">
            <p class="text-muted">Use the buttons above to set start and end points, or click on features for info.</p>
        </div>
    </div>

    <div class="sidebar-actions">
        <button id="clearBtn" class="btn btn-outline-danger btn-sm">Clear Route</button>
        <button id="nearestBtn" class="btn btn-outline-success btn-sm">Find Nearest</button>
    </div>

    <div class="sidebar-footer">
        <img src="/static/nasrda-logo.png" alt="NASRDA" class="sidebar-nasrda-logo"/>
        <span>Powered by <strong>NASRDA</strong></span>
    </div>
</aside>

<!-- Map -->
<div id="map">
    <!-- Transport Mode Toggle -->
    <div class="transport-mode-toggle">
        <button id="btnDriving" class="transport-mode-btn active" title="Driving (roads only)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 17h14M6 17l1-6h10l1 6M8 11V7c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2v4M7 17v2M17 17v2"/>
            </svg>
            <span>Driving</span>
        </button>
        <button id="btnWalking" class="transport-mode-btn" title="Walking (roads + footpaths)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="4" r="2"/>
                <path d="M14 8l-2 8 4 4M10 8l2 8-4 4M12 12h-2M12 12h2"/>
            </svg>
            <span>Walking</span>
        </button>
    </div>
</div>

<!-- Voice Assistant Mascot (starts hidden, animated from splash) -->
<div id="voiceMascot" class="voice-mascot" style="opacity: 0;">
    <div id="voiceBubble" class="voice-bubble"></div>
    <img id="voiceMascotAvatar" src="/static/Vector.png" alt="Navi" class="voice-mascot-avatar"/>
    <div class="voice-mascot-ring"></div>
    <span id="voiceMascotStatus" class="voice-mascot-status">Voice On</span>
</div>

<!-- Scripts -->
<script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<!-- App JS (ES Module) -->
<script type="module" src="/static/js/main.js"></script>
</body>
</html>
